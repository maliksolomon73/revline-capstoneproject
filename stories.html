<!DOCTYPE html>
<html lang="en">

<head>
  <title>RevLine</title>
  <link rel="stylesheet" href="project.css">
</head>

<body>
  <header>
    <img src="images/RevlineLogo.png" alt="RevLine Logo">
    <h1>Every Car Has a Story</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="stories.html">Stories</a>
      <a href="community.html">Community</a>
      <a href="support.html">Support/About</a>
      <a href="prducts.html">Products</a>
    </nav>
  </header>

  <h1>Add Your Story Below!</h1><br>

  <form id="carForm">
    <label for="ownerName">Your Name:</label>
    <input type="text" id="ownerName" placeholder="Enter your name" required><br>

    <label for="carMake">Car Make:</label>
    <input type="text" id="carMake" placeholder="ex., Nissan, BMW, Ford" required><br>

    <label for="carModel">Car Model:</label>
    <input type="text" id="carModel" placeholder="ex., Q50, M3, Mustang" required><br>

    <label for="story">Your Car Story:</label>
    <textarea id="story" placeholder="Tell us a little about your car..." rows="3" required></textarea><br>

    <label for="carImage">Upload a Picture of Your Car:</label>
    <input type="file" id="carImage" accept="image/*" required><br>

    <button type="submit">Add My Car</button>
  </form>

  <table id="storyTable">
    <thead>
      <tr>
        <th>Owner</th>
        <th>Car</th>
        <th>Story</th>
        <th>Photo</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("carForm");
    const tableBody = document.querySelector("#storyTable tbody");
    const fileInput = document.getElementById("carImage");

    const modal = document.createElement("div");
    modal.id = "imgModal";
    modal.style.cssText = `
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.8);
      justify-content:center;
      align-items:center;
      z-index:9999;
    `;
    modal.innerHTML = `
      <img id="modalImg" style="max-width:90%;max-height:90%;border-radius:10px;">
    `;
    document.body.appendChild(modal);
  
    modal.addEventListener("click", () => {
      modal.style.display = "none";
    });
  
    let stories = JSON.parse(localStorage.getItem("stories")) || [];
    renderStories();
  
    form.addEventListener("submit", function (e) {
      e.preventDefault();
  
      const ownerName = document.getElementById("ownerName").value.trim();
      const carMake = document.getElementById("carMake").value.trim();
      const carModel = document.getElementById("carModel").value.trim();
      const story = document.getElementById("story").value.trim();
      const file = fileInput.files[0];
  
      if (!ownerName || !carMake || !carModel || !story) {
        alert("Please fill all fields.");
        return;
      }
  
      if (!file) {
        const newStory = {
          id: Date.now(),
          ownerName,
          carMake,
          carModel,
          story,
          image: null
        };
  
        stories.push(newStory);
        localStorage.setItem("stories", JSON.stringify(stories));
        renderStories();
        form.reset();
        return;
      }
  
      if (!file.type.startsWith("image/")) {
        alert("Invalid image format");
        return;
      }
  
      if (file.size > 3 * 1024 * 1024) {
        alert("Image too large (3MB max)");
        return;
      }
  
      const reader = new FileReader();
      reader.onload = (event) => {
        const newStory = {
          id: Date.now(),
          ownerName,
          carMake,
          carModel,
          story,
          image: event.target.result
        };
  
        stories.push(newStory);
        localStorage.setItem("stories", JSON.stringify(stories));
        renderStories();
        form.reset();
      };
  
      reader.readAsDataURL(file);
    });
  
    function renderStories() {
      tableBody.innerHTML = "";
  
      stories.forEach((item) => {
        const row = document.createElement("tr");
  
        row.innerHTML = `
          <td>${item.ownerName}</td>
          <td>${item.carMake} ${item.carModel}</td>
          <td>${item.story}</td>
          <td>
            ${ item.image 
                ? `<img class="story-img" src="${item.image}" width="100" height="70" 
                     style="object-fit:cover;border-radius:6px;cursor:pointer;">`
                : "<em>No image</em>" }
          </td>
          <td>
            <button class="delete-btn" data-id="${item.id}" 
              style="background:#d33;color:#fff;padding:6px 10px;border:none;border-radius:4px;cursor:pointer;">
              Delete
            </button>
          </td>
        `;
  
        tableBody.appendChild(row);
      });
  
      document.querySelectorAll(".story-img").forEach(img => {
        img.addEventListener("click", () => {
          document.getElementById("modalImg").src = img.src;
          modal.style.display = "flex";
        });
      });
  
      document.querySelectorAll(".delete-btn").forEach(btn => {
        btn.addEventListener("click", (e) => {
          const id = Number(e.target.getAttribute("data-id"));
          deleteStory(id);
        });
      });
    }
  
    function deleteStory(id) {
      stories = stories.filter(s => s.id !== id);
      localStorage.setItem("stories", JSON.stringify(stories));
      renderStories();
    }
  });
  </script>
  

 <footer>
    <p>&copy; 2025 REVLINE | Every Car Has a Story</p>
    <div class="socials">
      <a href="#"><img src="images/instagram.png" alt="Instagram" width="20"></a>
      <a href="#"><img src="images/twitter.png" alt="Twitter" width="20"></a>
      <a href="#"><img src="images/youtube.png" alt="YouTube" width="20"></a>
    </div>
  </footer>
</body>
</html>



