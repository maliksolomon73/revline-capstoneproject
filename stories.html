<!DOCTYPE html>
<html lang="en">

<head>
  <title>RevLine</title>
  <link rel="stylesheet" href="project.css">
</head>

<body>
  <header>
    <img src="images/RevlineLogo.png" alt="RevLine Logo">
    <h1>Every Car Has a Story</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="stories.html">Stories</a>
      <a href="community.html">Community</a>
      <a href="support.html">Support/About</a>
    </nav>
  </header>

  <h1>Add Your Story Below!</h1><br>

  <form id="carForm">
    <label for="ownerName">Your Name:</label>
    <input type="text" id="ownerName" placeholder="Enter your name" required><br>

    <label for="carMake">Car Make:</label>
    <input type="text" id="carMake" placeholder="ex., Nissan, BMW, Ford" required><br>

    <label for="carModel">Car Model:</label>
    <input type="text" id="carModel" placeholder="ex., Q50, M3, Mustang" required><br>

    <label for="story">Your Car Story:</label>
    <textarea id="story" placeholder="Tell us a little about your car..." rows="3" required></textarea><br>

    <label for="carImage">Upload a Picture of Your Car:</label>
    <input type="file" id="carImage" accept="image/*" required><br>

    <button type="submit">Add My Car</button>
  </form>

  <table id="storyTable">
    <thead>
      <tr>
        <th>Owner</th>
        <th>Car</th>
        <th>Story</th>
        <th>Photo</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("carForm");
      const tableBody = document.querySelector("#storyTable tbody");
      const fileInput = document.getElementById("carImage");

      form.addEventListener("submit", function (e) {
        e.preventDefault();

        // Collect form data
        const ownerName = document.getElementById("ownerName").value.trim();
        const carMake = document.getElementById("carMake").value.trim();
        const carModel = document.getElementById("carModel").value.trim();
        const story = document.getElementById("story").value.trim();
        const file = fileInput.files[0];

        // Basic validation
        if (!ownerName || !carMake || !carModel || !story) {
          alert("Please fill out all fields before submitting.");
          return;
        }

        // Optional: handle missing image gracefully
        if (!file) {
          const newRow = document.createElement("tr");
          newRow.innerHTML = `
            <td>${ownerName}</td>
            <td>${carMake} ${carModel}</td>
            <td>${story}</td>
            <td><em>No image uploaded</em></td>
          `;
          tableBody.appendChild(newRow);
          form.reset();
          showSuccessMessage();
          return;
        }

        // Validate file type and size
        if (!file.type.startsWith("image/")) {
          alert("Please upload a valid image file (JPG, PNG, etc.)");
          return;
        }
        if (file.size > 3 * 1024 * 1024) {
          alert("Image is too large (max 3MB). Please choose a smaller file.");
          return;
        }

        // Read image and add to table
        const reader = new FileReader();
        reader.onload = function (event) {
          const newRow = document.createElement("tr");
          newRow.classList.add("fade-in");

          newRow.innerHTML = `
            <td>${ownerName}</td>
            <td>${carMake} ${carModel}</td>
            <td>${story}</td>
            <td><img src="${event.target.result}" alt="${carMake} ${carModel}" width="100" height="70" style="object-fit:cover; border-radius:6px;"></td>
          `;

          tableBody.appendChild(newRow);
          form.reset();
          showSuccessMessage();
        };

        reader.readAsDataURL(file);
      });

      // Small confirmation after submission
      function showSuccessMessage() {
        const msg = document.createElement("p");
        msg.textContent = "âœ… Story added successfully!";
        msg.className = "success-message";
        form.appendChild(msg);

        setTimeout(() => msg.remove(), 3000);
      }
    });
  </script>
  

 <footer>
    <p>&copy; 2025 REVLINE | Every Car Has a Story</p>
    <div class="socials">
      <a href="#"><img src="images/instagram.png" alt="Instagram" width="20"></a>
      <a href="#"><img src="images/twitter.png" alt="Twitter" width="20"></a>
      <a href="#"><img src="images/youtube.png" alt="YouTube" width="20"></a>
    </div>
  </footer>
</body>
</html>
